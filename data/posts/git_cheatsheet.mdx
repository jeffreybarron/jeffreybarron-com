# Git Cheat Sheet

#### Definitions

**_head:_** When working with Git, only *one* branch can be checked out at a time - and this is what's called the "HEAD" branch. Often, this is also referred to as the "active" or "current" branch.  
**_detached head:_** In rare cases, the HEAD file does NOT contain a branch reference, but a SHA-1 value of a specific revision. This happens when you checkout a specific commit, tag, or remote branch. Your repository is then in a state called [Detached HEAD](https://www.git-tower.com/learn/git/faq/detached-head-when-checkout-commit).

#### Helpful links

- [Scott 'the legend' Hanselman talks about git](https://youtu.be/Mfz8NQncwiQ?list=PL0M0zPgJ3HSesuPIObeUVQNbKqlw5U2Vr)

## Configure Git

```shell
# Config
git config user.name <name>
git config --global user.name <name>
git config --global user.email <email>

# Git Basics
git init <directory>

git init -b <name> # initialise and call the first branch main or anthing else

git clone <repo>
```

## Managing Code versions

```shell
# addd files to git for tracking
git add .

# commit staged files
git commit -m "<message>"

# Combine git add . && git commit -m "<message>"
git commit -am "<message>"
or
git add . && git commit -m "initial commit"


# Change the commit message on the   latest commit
git commit --amend -m "<message>"

# add some extra files to the last commit (if not already pushed to remote)
git add .
git commit --amend -m "<new message>"
or
git commit --amend --no-edit

# Revert to a previous commit, like undue
git revert <branch-name>

```

### Git Stash

```shell
# Save changes for later use, and remove from current working directory
git stash

# restore stashed changes
git stash pop

# save with a name
git stash save <name>

# show lis of saved stashs'
git stash list

# restore stash from list using index. e.g. where stash@{0}, the <index> is 0
git stash apply <index>
```

### Analysis

```shell
git satus

git log

# show view like that in vscode extension Git Graph
git log --graph --oneline --decorate

git diff

```

### looking for last known good code

```shell
git bisect start
git bisect bad
git bisect good <commit id>
```

### Git Branches

```shell
# List all of the branches in your repo. Add a <branch> argument to create a new branch with the name <branch>.
git branch
# show all branches
git branch -a

# Create and check out a new branch named <branch>. Drop the -b flag to checkout an existing branch.
git checkout -b <branch>

#Merge <branch> into the current branch.
# from the master merge in the branch
git merge <branch>

git branch -delete <branch>
```

### Remote Repositories

`git push remote` requires ssh setup on the local server.

```shell
# Show remotes
git remote show
git remote show <remote repository name>
e.g.
git remote show origin

# Create a new connection to a remote repo. After adding a remote, you can use <name> as a shortcut for <url> in other commands.
git remote add <name> <url>

# Verifies the new remote URL
git remote -v

# Remove remote repo by name
git remote remove [name of the remote]

# Push the branch to <remote>, along with necessary commits and objects.
git push <remote> <branch>

# push a locally created **branch** up to the remote origin
git push --set-upstream origin <this branch name>
or
git push -u origin main
```

## Git Pull Request

```shell
placeholder
```

## Git Merge Request

```shell
placeholder
```

## Git merge pull request

1. PERSON2: fork repo
2. PERSON2: make a branch
3. PERSON2: make change in branc
4. PERSON2:add the change to the branch
5. PERSON2:commit the changes to the branch
6. PERSON2:issue pull request to origin
7. PERSON1: make a branch by the same name as PERSON2 branch
8. pull PERSON2 branch into PERSON1 Branch
9. review, change, merge commit as normal

```shell
--no-ff means ??
```

## Rebase and Merge

```shell
placeholder
```

### Rebase, squash

```shell
# git rebase squash
placeholder
```

## Git Cherrypick

```shell
placeholder
```

## GitLab

### Command line instructions from GitLab

You can also upload existing files from your computer using the instructions below.

### Git global setup

```shell
git config --global user.name "John Doe"
git config --global user.email "john.doe@gmail.com"
```

### Create a new repository

```shell
git clone git@gitlab.com:uow-itms/greenfields-nextjs.git
cd greenfields-nextjs
git switch -c main
touch README.md
git add README.md
git commit -m "add README"
git push -u origin main
```

### Push an existing folder

first create a gitlab repo on the server with no readme.md

```shell
cd existing_folder
git init --initial-branch=main
git remote add origin git@gitlab.com:uow-itms/greenfields-nextjs.git
git add .
git commit -m "Initial commit"
git push -u origin main
```

### Push an existing Git repository

```shell
cd existing_repo
git remote rename origin old-origin
git remote add origin git@gitlab.com:uow-itms/greenfields-nextjs.git
git push -u origin --all
git push -u origin --tags
```
